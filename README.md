# prostef_microservices
prostef microservices repository

## Docker-2
- Инфициализирован репозиторий и Travis CI
- Установлен Docker
- Протестировано создание и запуск контейнеров
- Протестирован запуск команд внутри контейнеров
- Протестировано создание образов из контейнеров
- При помощи docker-machine создан экземпляр ВМ в связке с GCE
- Создан файл Dockerfile с описанием образа с необходимыми приложениями
- Создан образ и запушен в Docker-hub под учеткой prostef

## Docker-3
- Приложение разбито на 3 компонента: сервис для постов, сервис для комментариев и веб-интерфейс, работающий с другими сервисами
- Так же для приложения была добавлена БД MongoDB
- Собраны образы всех сервисов
- Запущены все сервисы и протестирована их работа
- Для избежания потери данных создан том reddit_db и последущем запуске сервиса БД этот том был подключен к нему
- Протестирована окончальная работа всего приложения

## Docker-4
- Рассмотрена и протестировна работа с разными драйверами сети Docker
- Установлен Docker-compose, при помощи которого можно легко на yml описать запуск нескольких контейнеров по определенному сценацию
- Создан и параметаризирован docker-compose.yml
- Значения параметров заданы в файле .env в этой же директории
- Базовое имя проекта тоже можно переопределить при помщи переменной COMPOSE_PROJECT_NAME в файле .env

## GitLab CI
- При помощи gcloud создан инстанс: gcloud compute instances create "gitlab-ci" \
        --image-family="ubuntu-1604-lts" \
        --image-project=ubuntu-os-cloud \
        --machine-type="n1-standard-1" \
        --boot-disk-size="100" \
        --zone="europe-west1-b" \
        --tags="default-allow-http,default-allow-ssh,http-server,https-server"
- Установлен Docker на инстнс
- Подготовлено окружение и при помощи Docker-compose поднят GitLab на инстансе
- Произведена регистрация аккаунта в GitLab
- Локальная ветка gitlab-ci-1 связана с удаленным репозиторием на инстансе и запушена туда
- В GitLab добавлен Runner для запуска пайплайнов
- В пайплайн добавлено тестирование
